key = "AIzaSyBRTkRioQwhy_xqQE88Ti1P23uriGD7Wf0",
language = "en",
simplify = TRUE)
stjospeh
ann_text <- data.frame(x = c(chicago$results$geometry$location$lng,
stjospeh$results$geometry$location$lng),
y = c(chicago$results$geometry$location$lat,
stjospeh$results$geometry$location$lat),
labs = c(paste0(chicago$results$formatted_address),
paste0(stjospeh$results$formatted_address)
))
roadtrip_map + geom_text(data = ann_text, aes(x, y, label = labs), size = 4)
annarbor <- google_geocode(address = "Ann Arbor, MI",
key = "AIzaSyBRTkRioQwhy_xqQE88Ti1P23uriGD7Wf0",
language = "en",
simplify = TRUE)
annarbor
ann_text <- data.frame(x = c(chicago$results$geometry$location$lng,
stjospeh$results$geometry$location$lng,
annarbor$results$geometry$location$lng),
y = c(chicago$results$geometry$location$lat,
stjospeh$results$geometry$location$lat,
annarbor$results$geometry$location$lat),
labs = c(paste0(chicago$results$formatted_address),
paste0(stjospeh$results$formatted_address),
paste0(annarbor$results$formatted_address)
))
roadtrip_map + geom_text(data = ann_text, aes(x, y, label = labs), size = 4)
roadtrip_map <- ggmap(map, darken = c(0.5, "white")) + geom_point(aes(x = lon, y = lat, col = factor(day), group = factor(day)), data = geodata_2, alpha = 0.5) +
geom_path(aes(x = lon, y = lat, col = factor(day)), data = geodata_2[which(geodata_2$day %in% c("26", "27")), ], alpha = 0.5) +
theme(legend.position="none") + labs(x="Longitude", y="Latitude", title="Roadtrip 2016")
ann_text <- data.frame(x = c(chicago$results$geometry$location$lng,
stjospeh$results$geometry$location$lng,
annarbor$results$geometry$location$lng),
y = c(chicago$results$geometry$location$lat,
stjospeh$results$geometry$location$lat,
annarbor$results$geometry$location$lat),
labs = c(paste0(chicago$results$formatted_address),
paste0(stjospeh$results$formatted_address),
paste0(annarbor$results$formatted_address)
))
roadtrip_map + geom_text(data = ann_text, aes(x, y, label = labs), size = 4)
detroit <- google_geocode(address = "Detroit, MI",
key = "AIzaSyBRTkRioQwhy_xqQE88Ti1P23uriGD7Wf0",
language = "en",
simplify = TRUE)
detroit
roadtrip_map <- ggmap(map, darken = c(0.3, "white")) + geom_point(aes(x = lon, y = lat, col = factor(day), group = factor(day)), data = geodata_2, alpha = 0.5) +
geom_path(aes(x = lon, y = lat, col = factor(day)), data = geodata_2[which(geodata_2$day %in% c("26", "27")), ], alpha = 0.5) +
theme(legend.position="none") + labs(x="Longitude", y="Latitude", title="Roadtrip 2016")
ann_text <- data.frame(x = c(chicago$results$geometry$location$lng,
stjospeh$results$geometry$location$lng,
annarbor$results$geometry$location$lng,
detroit$results$geometry$location$lng),
y = c(chicago$results$geometry$location$lat,
stjospeh$results$geometry$location$lat,
annarbor$results$geometry$location$lat,
detroit$results$geometry$location$lat),
labs = c(paste0(chicago$results$formatted_address),
paste0(stjospeh$results$formatted_address),
paste0(annarbor$results$formatted_address),
paste0(detroit$results$formatted_address)
))
roadtrip_map + geom_text(data = ann_text, aes(x, y, label = labs), size = 4)
burlington <- google_geocode(address = "Burlington, ON",
key = "AIzaSyBRTkRioQwhy_xqQE88Ti1P23uriGD7Wf0",
language = "en",
simplify = TRUE)
burlington
ann_text <- data.frame(x = c(chicago$results$geometry$location$lng,
stjospeh$results$geometry$location$lng,
annarbor$results$geometry$location$lng,
detroit$results$geometry$location$lng,
burlington$results$geometry$location$lng),
y = c(chicago$results$geometry$location$lat,
stjospeh$results$geometry$location$lat,
annarbor$results$geometry$location$lat,
detroit$results$geometry$location$lat+1,
burlington$results$geometry$location$lat),
labs = c(paste0(chicago$results$formatted_address),
paste0(stjospeh$results$formatted_address),
paste0(annarbor$results$formatted_address),
paste0(detroit$results$formatted_address,
paste0(burlington$results$formatted_address)
))
roadtrip_map + geom_text(data = ann_text, aes(x, y, label = labs), size = 4)
roadtrip_map <- ggmap(map, darken = c(0.3, "white")) + geom_point(aes(x = lon, y = lat, col = factor(day), group = factor(day)), data = geodata_2, alpha = 0.3) +
geom_path(aes(x = lon, y = lat, col = factor(day)), data = geodata_2[which(geodata_2$day %in% c("26", "27")), ], alpha = 0.5) +
theme(legend.position="none") + labs(x="Longitude", y="Latitude", title="Roadtrip 2016")
ann_text <- data.frame(x = c(chicago$results$geometry$location$lng,
stjospeh$results$geometry$location$lng,
annarbor$results$geometry$location$lng,
detroit$results$geometry$location$lng,
burlington$results$geometry$location$lng),
y = c(chicago$results$geometry$location$lat,
stjospeh$results$geometry$location$lat,
annarbor$results$geometry$location$lat,
detroit$results$geometry$location$lat+1,
burlington$results$geometry$location$lat),
labs = c(paste0(chicago$results$formatted_address),
paste0(stjospeh$results$formatted_address),
paste0(annarbor$results$formatted_address),
paste0(detroit$results$formatted_address),
paste0(burlington$results$formatted_address)
))
roadtrip_map + geom_text(data = ann_text, aes(x, y, label = labs), size = 4)
ann_text <- data.frame(x = c(chicago$results$geometry$location$lng,
stjospeh$results$geometry$location$lng,
annarbor$results$geometry$location$lng,
detroit$results$geometry$location$lng,
burlington$results$geometry$location$lng),
y = c(chicago$results$geometry$location$lat,
stjospeh$results$geometry$location$lat,
annarbor$results$geometry$location$lat,
detroit$results$geometry$location$lat+0.1,
burlington$results$geometry$location$lat),
labs = c(paste0(chicago$results$formatted_address),
paste0(stjospeh$results$formatted_address),
paste0(annarbor$results$formatted_address),
paste0(detroit$results$formatted_address),
paste0(burlington$results$formatted_address)
))
roadtrip_map + geom_text(data = ann_text, aes(x, y, label = labs), size = 4)
ashtabula <- google_geocode(address = "Ashtabula",
key = "AIzaSyBRTkRioQwhy_xqQE88Ti1P23uriGD7Wf0",
language = "en",
simplify = TRUE)
ashtabula
ann_text <- data.frame(x = c(chicago$results$geometry$location$lng,
stjospeh$results$geometry$location$lng,
annarbor$results$geometry$location$lng,
detroit$results$geometry$location$lng,
burlington$results$geometry$location$lng,
ashtabula$results$geometry$location$lng),
y = c(chicago$results$geometry$location$lat,
stjospeh$results$geometry$location$lat,
annarbor$results$geometry$location$lat,
detroit$results$geometry$location$lat+0.1, #adjusting Detroit label to avoid overlapping with Ann Arbor
burlington$results$geometry$location$lat,
ashtabula$results$geometry$location$lat),
labs = c(paste0(chicago$results$formatted_address),
paste0(stjospeh$results$formatted_address),
paste0(annarbor$results$formatted_address),
paste0(detroit$results$formatted_address),
paste0(burlington$results$formatted_address),
paste0(ashtabula$results$formatted_address)
))
roadtrip_map + geom_text(data = ann_text, aes(x, y, label = labs), size = 4)
pittsburgh <- google_geocode(address = "Pittsburgh",
key = "AIzaSyBRTkRioQwhy_xqQE88Ti1P23uriGD7Wf0",
language = "en",
simplify = TRUE)
marietta <- google_geocode(address = "Marietta, OH",
key = "AIzaSyBRTkRioQwhy_xqQE88Ti1P23uriGD7Wf0",
language = "en",
simplify = TRUE)
marietta
maysville <- google_geocode(address = "Maysville, KY",
key = "AIzaSyBRTkRioQwhy_xqQE88Ti1P23uriGD7Wf0",
language = "en",
simplify = TRUE)
maysville
louisville <- google_geocode(address = "Louisville",
key = "AIzaSyBRTkRioQwhy_xqQE88Ti1P23uriGD7Wf0",
language = "en",
simplify = TRUE)
louisville
paducah <- google_geocode(address = "Paducah, KY",
key = "AIzaSyBRTkRioQwhy_xqQE88Ti1P23uriGD7Wf0",
language = "en",
simplify = TRUE)
paducah
ann_text <- data.frame(x = c(chicago$results$geometry$location$lng,
stjospeh$results$geometry$location$lng,
annarbor$results$geometry$location$lng,
detroit$results$geometry$location$lng,
burlington$results$geometry$location$lng,
ashtabula$results$geometry$location$lng,
pittsburgh$results$geometry$location$lng,
marietta$results$geometry$location$lng,
maysville$results$geometry$location$lng,
louisville$results$geometry$location$lng,
paducah$results$geometry$location$lng),
y = c(chicago$results$geometry$location$lat,
stjospeh$results$geometry$location$lat,
annarbor$results$geometry$location$lat,
detroit$results$geometry$location$lat+0.1, #adjusting Detroit label to avoid overlapping with Ann Arbor
burlington$results$geometry$location$lat,
ashtabula$results$geometry$location$lat,
pittsburgh$results$geometry$location$lat,
marietta$results$geometry$location$lat,
maysville$results$geometry$location$lat,
louisville$results$geometry$location$lat,
paducah$results$geometry$location$lat),
labs = c(paste0(chicago$results$formatted_address),
paste0(stjospeh$results$formatted_address),
paste0(annarbor$results$formatted_address),
paste0(detroit$results$formatted_address),
paste0(burlington$results$formatted_address),
paste0(ashtabula$results$formatted_address),
paste0(pittsburgh$results$formatted_address),
paste0(marietta$results$formatted_address),
paste0(maysville$results$formatted_address),
paste0(louisville$results$formatted_address),
paste0(paducah$results$formatted_address)
))
roadtrip_map + geom_text(data = ann_text, aes(x, y, label = labs), size = 4)
write.table(ann_text, "ann_text.txt", row.names = F, col.names = T, sep = "\t")
ann_text <- read.table("ann_text.txt", header = T, sep = "\t")
ann_text
louisville <- google_geocode(address = "Louisville, KY",
key = "your_key",
language = "en",
simplify = TRUE)
louisville <- google_geocode(address = "Louisville, KY",
key = "AIzaSyBRTkRioQwhy_xqQE88Ti1P23uriGD7Wf0",
language = "en",
simplify = TRUE)
ann_text <- data.frame(x = c(chicago$results$geometry$location$lng,
stjospeh$results$geometry$location$lng,
annarbor$results$geometry$location$lng,
detroit$results$geometry$location$lng,
burlington$results$geometry$location$lng,
ashtabula$results$geometry$location$lng,
pittsburgh$results$geometry$location$lng,
marietta$results$geometry$location$lng,
maysville$results$geometry$location$lng,
louisville$results$geometry$location$lng,
paducah$results$geometry$location$lng),
y = c(chicago$results$geometry$location$lat,
stjospeh$results$geometry$location$lat,
annarbor$results$geometry$location$lat,
detroit$results$geometry$location$lat+0.1, #adjusting Detroit label to avoid overlapping with Ann Arbor
burlington$results$geometry$location$lat,
ashtabula$results$geometry$location$lat,
pittsburgh$results$geometry$location$lat,
marietta$results$geometry$location$lat,
maysville$results$geometry$location$lat,
louisville$results$geometry$location$lat,
paducah$results$geometry$location$lat),
labs = c(paste0(chicago$results$formatted_address),
paste0(stjospeh$results$formatted_address),
paste0(annarbor$results$formatted_address),
paste0(detroit$results$formatted_address),
paste0(burlington$results$formatted_address),
paste0(ashtabula$results$formatted_address),
paste0(pittsburgh$results$formatted_address),
paste0(marietta$results$formatted_address),
paste0(maysville$results$formatted_address),
paste0(louisville$results$formatted_address),
paste0(paducah$results$formatted_address)
))
write.table(ann_text, "ann_text.txt", row.names = F, col.names = T, sep = "\t")
ann_text <- read.table("ann_text.txt", header = T, sep = "\t")
ann_text
louisville
roadtrip_map + geom_text(data = ann_text, aes(x, y, label = labs), size = 4)
louisville <- google_geocode(address = "Louisville, KY",
key = "AIzaSyBRTkRioQwhy_xqQE88Ti1P23uriGD7Wf0",
language = "en",
simplify = TRUE)
louisville
louisville$results$geometry$location$lng
ann_text <- data.frame(x = c(chicago$results$geometry$location$lng,
stjospeh$results$geometry$location$lng,
annarbor$results$geometry$location$lng,
detroit$results$geometry$location$lng,
burlington$results$geometry$location$lng,
ashtabula$results$geometry$location$lng,
pittsburgh$results$geometry$location$lng,
marietta$results$geometry$location$lng,
maysville$results$geometry$location$lng,
louisville$results$geometry$location$lng[1],
paducah$results$geometry$location$lng),
y = c(chicago$results$geometry$location$lat,
stjospeh$results$geometry$location$lat,
annarbor$results$geometry$location$lat,
detroit$results$geometry$location$lat+0.1, #adjusting Detroit label to avoid overlapping with Ann Arbor
burlington$results$geometry$location$lat,
ashtabula$results$geometry$location$lat,
pittsburgh$results$geometry$location$lat,
marietta$results$geometry$location$lat,
maysville$results$geometry$location$lat,
louisville$results$geometry$location$lat[1],
paducah$results$geometry$location$lat),
labs = c(paste0(chicago$results$formatted_address),
paste0(stjospeh$results$formatted_address),
paste0(annarbor$results$formatted_address),
paste0(detroit$results$formatted_address),
paste0(burlington$results$formatted_address),
paste0(ashtabula$results$formatted_address),
paste0(pittsburgh$results$formatted_address),
paste0(marietta$results$formatted_address),
paste0(maysville$results$formatted_address),
paste0(louisville$results$formatted_address[1]),
paste0(paducah$results$formatted_address)
))
ann_text
write.table(ann_text, "ann_text.txt", row.names = F, col.names = T, sep = "\t")
roadtrip_map + geom_text(data = ann_text, aes(x, y, label = labs), size = 4)
head(geodata)
tail(geodata)
geodata$time_CDT <- with_tz(geodata$time, tz="America/Chicago")
geodata$time_EDT <- with_tz(geodata$time, tz="America/New_York")
geodata$time[1]
geodata$time_CDT[1]
geodata$time_EDT[1]
geodata$day_EDT <- as.factor(format(as.Date(geodata$time_EDT,format="%Y-%m-%d"), "%d"))
head(geodata)
tail(geodata)
summary(geodata)
str(geodata)
i=1
data_row <- geodata[i, ]
data_row
data_row$day_EDT == "10"
which(geodata$day_EDT == "10")
i=
12229
data_row <- geodata[i, ]
data_row
data_row$day_EDT == "10"
google_timezone_api <- google_timezone(location = c(data_row$lat, data_row$lon),
timestamp = as.POSIXct(data_row$time_EDT), # because the majority of our trip was in EDT
key = "AIzaSyBkqrk8mBqqvao-W-jKkL2VhHCGLWqZVCY",
simplify = TRUE,
language = "en")
google_timezone_api
time_zone <- google_timezone_api$timeZoneId
data_row$local_time <- with_tz(data_row$time, tz=paste(time_zone))
data_row
geodata[i, ]$local_time
geodata[i, ]$local_time <- with_tz(data_row$time, tz=paste(time_zone))
geodata[i, ]$local_time
geodata[i, ]
geodata$local_time <- "NA"
geodata[i, ]
geodata[i, ]$local_time <- with_tz(data_row$time, tz=paste(time_zone))
geodata[i, ]
with_tz(data_row$time, tz=paste(time_zone))
geodata[i, "local_time"] <- with_tz(data_row$time, tz=paste(time_zone))
geodata[i, "local_time"] <- as.POSIXct(with_tz(data_row$time, tz=paste(time_zone)))
geodata[i, ]
with_tz(data_row$time, tz=paste(time_zone))
geodata[i, "local_time"] <- as.POSIXlt(with_tz(data_row$time, tz=paste(time_zone)))
as.POSIXlt(with_tz(data_row$time, tz=paste(time_zone)))
geodata[i, "local_time"] <- as.POSIXlt(with_tz(data_row$time, tz=paste(time_zone)))
geodata[i, ]
geodata[i, "local_time"]
geodata$local_time <- "NA"
geodata[i, "local_time"]
geodata[i, "local_time"] <- as.POSIXlt(with_tz(data_row$time, tz=paste(time_zone)))
geodata[i, ]
geodata[i, "local_time"]
as.POSIXlt(with_tz(data_row$time, tz=paste(time_zone)))
geodata[i, ]
geodata <- geodata[,-ncol(geodata)]
geodata[i, ]
geodata_timezone$local_time <- "NA"
head(geodata_timezone)
tail(geodata_timezone)
geodata_timezone$local_time[i]
geodata_timezone$local_time[i] <- as.POSIXlt(with_tz(data_row$time, tz=paste(time_zone)))
geodata_timezone$local_time[i]
geodata_timezone$local_time <- "NA"
str(as.POSIXlt(with_tz(data_row$time, tz=paste(time_zone))))
local_time <- as.POSIXlt(with_tz(data_row$time, tz=paste(time_zone)))
local_time[1]
geodata_timezone$local_time[i] <- local_time[1]
geodata_timezone$local_time <- "NA"
local_time[[1]]
local_time[1]
geodata_timezone$local_time[i] <- local_time[[1]]
geodata_timezone$local_time[i]
unlist(local_time)
as.character(local_time)
geodata_timezone$local_time[i] <- as.character(local_time)
geodata_timezone$local_time[i]
i=1
geodata[i, ]
geodata_timezone$local_time[i]
geodata_timezone$local_time[i] <- as.character(geodata_timezone$time_CDT)
as.character(geodata_timezone$time_CDT)
geodata_timezone$local_time[i] <- as.character(geodata_timezone$time_CDT[i])
geodata_timezone$local_time[i]
geodata_timezone$local_time <- "NA"
for (i in 1:nrow(geodata)){
if (is.na(nchar(strsplit(as.character(i/100), "\\.")[[1]][2]))){
print(i)
}
if (data_row$day_EDT == "10"){
data_row <- geodata[i, ]
google_timezone_api <- google_timezone(location = c(data_row$lat, data_row$lon),
timestamp = as.POSIXct(data_row$time_EDT), # because the majority of our trip was in EDT
key = "AIzaSyBkqrk8mBqqvao-W-jKkL2VhHCGLWqZVCY",
simplify = TRUE,
language = "en")
time_zone <- google_timezone_api$timeZoneId
local_time <- as.POSIXlt(with_tz(data_row$time, tz=paste(time_zone)))
geodata_timezone$local_time[i] <- as.character(local_time)
} else {
if (data_row$day_EDT == "09"){
geodata_timezone$local_time[i] <- as.character(geodata_timezone$time_CDT[i])
} else {
geodata_timezone$local_time[i] <- as.character(geodata_timezone$time_EDT[i])
}
rm(data_row, google_timezone_api, time_zone)
}
geodata[i, "day_EDT"]
geodata_timezone$local_time <- "NA"
for (i in 1:nrow(geodata)){
if (is.na(nchar(strsplit(as.character(i/100), "\\.")[[1]][2]))){
print(i)
}
if (geodata[i, "day_EDT"] == "10"){
data_row <- geodata[i, ]
google_timezone_api <- google_timezone(location = c(data_row$lat, data_row$lon),
timestamp = as.POSIXct(data_row$time_EDT), # because the majority of our trip was in EDT
key = "AIzaSyBkqrk8mBqqvao-W-jKkL2VhHCGLWqZVCY",
simplify = TRUE,
language = "en")
time_zone <- google_timezone_api$timeZoneId
local_time <- as.POSIXlt(with_tz(data_row$time, tz=paste(time_zone)))
geodata_timezone$local_time[i] <- as.character(local_time)
} else {
if (data_row$day_EDT == "09"){
geodata_timezone$local_time[i] <- as.character(geodata_timezone$time_CDT[i])
} else {
geodata_timezone$local_time[i] <- as.character(geodata_timezone$time_EDT[i])
}
rm(data_row, google_timezone_api, time_zone)
}
for (i in 1:nrow(geodata)){
if (is.na(nchar(strsplit(as.character(i/100), "\\.")[[1]][2]))){
print(i)
}
if (geodata[i, "day_EDT"] == "10"){
data_row <- geodata[i, ]
google_timezone_api <- google_timezone(location = c(data_row$lat, data_row$lon),
timestamp = as.POSIXct(data_row$time_EDT), # because the majority of our trip was in EDT
key = "AIzaSyBkqrk8mBqqvao-W-jKkL2VhHCGLWqZVCY",
simplify = TRUE,
language = "en")
time_zone <- google_timezone_api$timeZoneId
local_time <- as.POSIXlt(with_tz(data_row$time, tz=paste(time_zone)))
geodata_timezone$local_time[i] <- as.character(local_time)
rm(data_row, google_timezone_api, time_zone)
} else {
if (data_row$day_EDT == "09"){
geodata_timezone$local_time[i] <- as.character(geodata_timezone$time_CDT[i])
} else {
geodata_timezone$local_time[i] <- as.character(geodata_timezone$time_EDT[i])
}
i
geodata[i, "day_EDT"] == "10"
for (i in 1:nrow(geodata)){
if (is.na(nchar(strsplit(as.character(i/100), "\\.")[[1]][2]))){
print(i)
}
if (geodata[i, "day_EDT"] == "10"){
data_row <- geodata[i, ]
google_timezone_api <- google_timezone(location = c(data_row$lat, data_row$lon),
timestamp = as.POSIXct(data_row$time_EDT), # because the majority of our trip was in EDT
key = "AIzaSyBkqrk8mBqqvao-W-jKkL2VhHCGLWqZVCY",
simplify = TRUE,
language = "en")
time_zone <- google_timezone_api$timeZoneId
local_time <- as.POSIXlt(with_tz(data_row$time, tz=paste(time_zone)))
geodata_timezone$local_time[i] <- as.character(local_time)
rm(data_row, google_timezone_api, time_zone)
} else {
if (geodata[i, "day_EDT"] == "09"){
geodata_timezone$local_time[i] <- as.character(geodata_timezone$time_CDT[i])
} else {
geodata_timezone$local_time[i] <- as.character(geodata_timezone$time_EDT[i])
}
i
geodata[i, "day_EDT"]
geodata_timezone$time_EDT[i]
geodata[i, ]
geodata_timezone$time_EDT[i]
geodata$time_EDT[i]
geodata_timezone <- geodata
geodata_timezone$local_time <- "NA"
for (i in 1:nrow(geodata)){
if (is.na(nchar(strsplit(as.character(i/100), "\\.")[[1]][2]))){
print(i)
}
if (geodata[i, "day_EDT"] == "10"){
data_row <- geodata[i, ]
google_timezone_api <- google_timezone(location = c(data_row$lat, data_row$lon),
timestamp = as.POSIXct(data_row$time_EDT), # because the majority of our trip was in EDT
key = "AIzaSyBkqrk8mBqqvao-W-jKkL2VhHCGLWqZVCY",
simplify = TRUE,
language = "en")
time_zone <- google_timezone_api$timeZoneId
local_time <- as.POSIXlt(with_tz(data_row$time, tz=paste(time_zone)))
geodata_timezone$local_time[i] <- as.character(local_time)
rm(data_row, google_timezone_api, time_zone)
} else {
if (geodata[i, "day_EDT"] == "09"){
geodata_timezone$local_time[i] <- as.character(geodata_timezone$time_CDT[i])
} else {
geodata_timezone$local_time[i] <- as.character(geodata_timezone$time_EDT[i])
}
warnings()
head(geodata_timezone)
tail(geodata_timezone)
head(geodata_timezone[which(geodata_timezone$day_EDT == "10")])
head(geodata_timezone[which(geodata_timezone$day_EDT == "10"), ])
tail(geodata_timezone[which(geodata_timezone$day_EDT == "10"), ])
write.table(geodata_timezone, "geodata_timezone.txt", row.names = F, col.names = T, sep = "\t")
